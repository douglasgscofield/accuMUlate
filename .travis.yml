language: cpp
sudo: false
compiler:
  - gcc
  - clang

addons:
  apt:
    sources:
      - ubuntu-toolchain-r-test
      - llvm-toolchain-precise
      - llvm-toolchain-precise-3.6
    packages:
      - gcc-4.9
      - g++-4.9
      - clang-3.6
      - llvm-3.6   
      - libgtest-dev 
env:
  global:
    - USE_CCACHE=1

before_install:
#debug travis errs
  -  ls -l $HOME
install:
 #nope
before_script:
    - ./travis_rebuild_cache.sh
    - ls -l $HOME/build/
    - ls -l $HOME/include/
    - ls -l $HOME/lib/
script:
  - g++ --version
  - if [ "$CXX" = "g++" ]; then export CXX="/usr/bin/g++-4.9" CC="gcc-4.9"; fi
  - if [ "$CXX" = "clang++" ]; then export CXX="/usr/bin/clang++-3.6" CC="clang-3.6"; fi
  - $CXX --version  
  - echo $CXX
  - which g++-4.9
  - ccache -s
  - mkdir -p build && cd build && cmake -DBOOST_INCLUDEDIR=${HOME}/include .. #-DBamtools_PREFIX=${HOME}/ ..
  - make
  - cd test &&  ./UnitTests 
cache:
    directories:
    - $HOME/lib/
    - $HOME/include/
    - $HOME/.ccache
